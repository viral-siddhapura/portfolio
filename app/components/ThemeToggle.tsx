'use client'

import { useEffect, useState } from 'react'
import { useTheme } from 'next-themes'

function ThemeToggle() {
  const { theme, setTheme } = useTheme()
  const [mounted, setMounted] = useState(false)

  useEffect(() => {
    setMounted(true)

    // Check if the user's preferred theme is stored in local storage
    const storedTheme = localStorage.getItem('theme')

    if (storedTheme) {
      setTheme(storedTheme)
    }
  }, [setTheme])

  useEffect(() => {
    // Store the user's preferred theme in local storage whenever it changes
    if (theme) {
      localStorage.setItem('theme', theme)
    }
  }, [theme])

  if (!mounted) return null // Prevent rendering on the server-side

  return (
    <div className='flex flex-wrap'>
      <button
        onClick={() => {
          setTheme(theme === 'light' ? 'dark' : 'light')
        }}
      >
        {theme === 'light' ? (
          <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 5C11.7167 5 11.4793 4.904 11.288 4.712C11.096 4.52067 11 4.28333 11 4V2C11 1.71667 11.096 1.479 11.288 1.287C11.4793 1.09567 11.7167 1 12 1C12.2833 1 12.521 1.09567 12.713 1.287C12.9043 1.479 13 1.71667 13 2V4C13 4.28333 12.9043 4.52067 12.713 4.712C12.521 4.904 12.2833 5 12 5ZM16.95 7.05C16.7667 6.86667 16.675 6.63733 16.675 6.362C16.675 6.08733 16.7667 5.85 16.95 5.65L18.35 4.225C18.55 4.025 18.7873 3.925 19.062 3.925C19.3373 3.925 19.575 4.025 19.775 4.225C19.9583 4.40833 20.05 4.64167 20.05 4.925C20.05 5.20833 19.9583 5.44167 19.775 5.625L18.35 7.05C18.1667 7.23333 17.9333 7.325 17.65 7.325C17.3667 7.325 17.1333 7.23333 16.95 7.05ZM20 13C19.7167 13 19.4793 12.904 19.288 12.712C19.096 12.5207 19 12.2833 19 12C19 11.7167 19.096 11.479 19.288 11.287C19.4793 11.0957 19.7167 11 20 11H22C22.2833 11 22.5207 11.0957 22.712 11.287C22.904 11.479 23 11.7167 23 12C23 12.2833 22.904 12.5207 22.712 12.712C22.5207 12.904 22.2833 13 22 13H20ZM12 23C11.7167 23 11.4793 22.904 11.288 22.712C11.096 22.5207 11 22.2833 11 22V20C11 19.7167 11.096 19.4793 11.288 19.288C11.4793 19.096 11.7167 19 12 19C12.2833 19 12.521 19.096 12.713 19.288C12.9043 19.4793 13 19.7167 13 20V22C13 22.2833 12.9043 22.5207 12.713 22.712C12.521 22.904 12.2833 23 12 23ZM5.65 7.05L4.225 5.65C4.025 5.45 3.925 5.20833 3.925 4.925C3.925 4.64167 4.025 4.40833 4.225 4.225C4.40833 4.04167 4.64167 3.95 4.925 3.95C5.20833 3.95 5.44167 4.04167 5.625 4.225L7.05 5.65C7.23333 5.83333 7.325 6.06667 7.325 6.35C7.325 6.63333 7.23333 6.86667 7.05 7.05C6.85 7.23333 6.61667 7.325 6.35 7.325C6.08333 7.325 5.85 7.23333 5.65 7.05ZM18.35 19.775L16.95 18.35C16.7667 18.15 16.675 17.9127 16.675 17.638C16.675 17.3627 16.7667 17.1333 16.95 16.95C17.1333 16.7667 17.3627 16.675 17.638 16.675C17.9127 16.675 18.15 16.7667 18.35 16.95L19.775 18.35C19.975 18.5333 20.0707 18.7667 20.062 19.05C20.054 19.3333 19.9583 19.575 19.775 19.775C19.575 19.975 19.3333 20.075 19.05 20.075C18.7667 20.075 18.5333 19.975 18.35 19.775ZM2 13C1.71667 13 1.47933 12.904 1.288 12.712C1.096 12.5207 1 12.2833 1 12C1 11.7167 1.096 11.479 1.288 11.287C1.47933 11.0957 1.71667 11 2 11H4C4.28333 11 4.521 11.0957 4.713 11.287C4.90433 11.479 5 11.7167 5 12C5 12.2833 4.90433 12.5207 4.713 12.712C4.521 12.904 4.28333 13 4 13H2ZM4.225 19.775C4.04167 19.5917 3.95 19.3583 3.95 19.075C3.95 18.7917 4.04167 18.5583 4.225 18.375L5.65 16.95C5.83333 16.7667 6.06267 16.675 6.338 16.675C6.61267 16.675 6.85 16.7667 7.05 16.95C7.25 17.15 7.35 17.3877 7.35 17.663C7.35 17.9377 7.25 18.175 7.05 18.375L5.65 19.775C5.45 19.975 5.20833 20.075 4.925 20.075C4.64167 20.075 4.40833 19.975 4.225 19.775ZM12 18C10.3333 18 8.91667 17.4167 7.75 16.25C6.58333 15.0833 6 13.6667 6 12C6 10.3333 6.58333 8.91667 7.75 7.75C8.91667 6.58333 10.3333 6 12 6C13.6667 6 15.0833 6.58333 16.25 7.75C17.4167 8.91667 18 10.3333 18 12C18 13.6667 17.4167 15.0833 16.25 16.25C15.0833 17.4167 13.6667 18 12 18ZM12 16C13.1 16 14.0417 15.6083 14.825 14.825C15.6083 14.0417 16 13.1 16 12C16 10.9 15.6083 9.95833 14.825 9.175C14.0417 8.39167 13.1 8 12 8C10.9 8 9.95833 8.39167 9.175 9.175C8.39167 9.95833 8 10.9 8 12C8 13.1 8.39167 14.0417 9.175 14.825C9.95833 15.6083 10.9 16 12 16Z" fill="#000" />
          </svg>
        ) : (
          <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 20.9999C9.48333 20.9999 7.354 20.1289 5.612 18.3869C3.87067 16.6456 3 14.5166 3 11.9999C3 9.6999 3.75 7.7039 5.25 6.0119C6.75 4.32057 8.66667 3.33324 11 3.0499C11.4167 2.9999 11.7417 3.1499 11.975 3.4999C12.2083 3.8499 12.2 4.21657 11.95 4.5999C11.6667 5.03324 11.454 5.49157 11.312 5.9749C11.1707 6.45824 11.1 6.96657 11.1 7.4999C11.1 8.9999 11.625 10.2749 12.675 11.3249C13.725 12.3749 15 12.8999 16.5 12.8999C17.0167 12.8999 17.5293 12.8249 18.038 12.6749C18.546 12.5249 19 12.3166 19.4 12.0499C19.75 11.8166 20.1083 11.8039 20.475 12.0119C20.8417 12.2206 21 12.5499 20.95 12.9999C20.7167 15.2999 19.7377 17.2082 18.013 18.7249C16.2877 20.2416 14.2833 20.9999 12 20.9999Z" fill="#fff" />
          </svg>
        )}
      </button>
    </div>
  )
}
export default ThemeToggle;